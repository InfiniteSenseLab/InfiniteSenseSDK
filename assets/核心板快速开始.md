## 1. 更新固件

1. 接好Type-C线，电脑将弹出一个USB串口设备或者一个128M的小U盘，在Linux下的串口设备名称为 /dev/ttyACM0。 如果没有这一现象，请更换Type-C线，部分Type-C线材是不支持的，最好使用USB2.0的线。
2. 长按图中所示的1号按键不松开，然后短按一下2号按键之后松开，会弹出一个128M的U盘。
3. 下载 firmware 目录下的 mini_xxxx.uf2 或者 flash_board_tool.uf2 固件。将固件拖入U盘中，则U盘消失，多出来一个串口设备即为成功。其中 flash_board_tool.uf2 是用于后面设置参数的固件，mini_xxxx.uf2固件是最新发布的固件，按日期使用最新的。

![按键说明](./img5.png)

## 2. 设置同步频率

1. 按照步骤1更新固件为mini_flash.uf2 固件
2. 连接串口助手，这里以win10自带的串口助手为例，配置参数为波特率 460800，数据位8， 校验位None，停止位1

![串口参数](./serial.png)

3. 发送触发频率指令 `HZx\n`,其中x在1-60之间。注意在后面是有一个回车的，这里以发送`HZ10`为例

![串口参数](./img6.png)

4. 重启，按照步骤1刷入最新固件。

## 3. 如何接线

1. 相机只需要两根线，一个触发线CAM、一个GND，在这下面图片中已经非常清晰。其中由于核心板只能提供3.3V电源，因此相机需要额外设备单独供电。

![接口定义](./img3.png)

2. 雷达接线通常需要三根线，分别是同步版上面的GND,TX, IO。这里以常用的MID360为例展示接线，与相机相似，Mid360需要额外供电

![接口定义](./img7.png)


## 4. 运行同步程序

1. 在linux系统上设置串口权限
2. 在终端运行ros，确保ros安装正确 `roscore`
2. 运行`demo`目录下的`uart_demo`

```
cd xxx/uart_demo 
mkdir build 
cd build 
cmake ..
make -j8
./uart_demo_ros_node
```

3. 在另一个终端中观察IMU数据

```
rostopic list
rostopic echo /imu_sync_board
```

看到不断更新的IMU数据即为正常

## 5. 同步相机、雷达

当第四步完成之后，同步版将以1hz频率发送雷达同步信号，在雷达软件中可以看到同步效果。这里以MID360为例。

![雷达同步](./img8.png)


相机的同步的测试可以回到参数设置，将相机同步频率设置为1，然后在相机软件中观察多个相机的采集频率是否为1Hz,并且观察多个相机采集的时刻是否为同一个时刻。确保没问题后，再将参数修改会目标值，正常使用。

